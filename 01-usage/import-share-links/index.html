<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>导入链接（重要） - V2RayGCon手册</title><meta name=generator content="Hugo 0.119.0"><link href=https://vrnobody.github.io/V2RayGConindex.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://vrnobody.github.io/V2RayGCon/01-usage/import-share-links/><link rel=stylesheet href=https://vrnobody.github.io/V2RayGCon/css/theme.min.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://vrnobody.github.io/V2RayGCon/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://vrnobody.github.io/V2RayGCon/js/bundle.js></script><style>:root{}.highlight{line-height:1.1}.highlight div{background-color:#eed!important}.highlight pre{background-color:#eed!important}</style><meta property="og:title" content="导入链接（重要）"><meta property="og:description" content="选项窗口的 “默认值” 分页可以修改导入链接的默认配置。 “默认模式” 对应 “模板” 分页的配置名字，软件自带了config, http, socks三种配置，可"><meta property="og:type" content="article"><meta property="og:url" content="https://vrnobody.github.io/V2RayGCon/01-usage/import-share-links/"><meta property="article:section" content="01-usage"><meta property="article:published_time" content="2020-02-01T17:39:27+08:00"><meta property="article:modified_time" content="2020-02-01T17:39:27+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="导入链接（重要）"><meta name=twitter:description content="选项窗口的 “默认值” 分页可以修改导入链接的默认配置。 “默认模式” 对应 “模板” 分页的配置名字，软件自带了config, http, socks三种配置，可"><meta itemprop=name content="导入链接（重要）"><meta itemprop=description content="选项窗口的 “默认值” 分页可以修改导入链接的默认配置。 “默认模式” 对应 “模板” 分页的配置名字，软件自带了config, http, socks三种配置，可"><meta itemprop=datePublished content="2020-02-01T17:39:27+08:00"><meta itemprop=dateModified content="2020-02-01T17:39:27+08:00"><meta itemprop=wordCount content="1600"><meta itemprop=keywords content></head><body><div class=container><header><h1>V2RayGCon手册</h1><img src=https://img.shields.io/github/release/vrnobody/V2RayGCon.svg alt="Release Badge"></header><div class=content-container><main><h1>导入链接（重要）</h1><p>选项窗口的 “默认值” 分页可以修改导入链接的默认配置。<figure><img src=../../images/forms/form_option_defaults.png></figure>“默认模式” 对应 “模板” 分页的配置名字，软件自带了config, http, socks三种配置，可以自行修改、添加更多配置<br>“默认core” 对应 “多内核” 分页的配置名字</p><h5 id=模板分页>模板(分页)</h5><p><figure><img src=../../images/forms/form_custom_config_template_editor.png></figure>上面是http配置模板示例。“合并方式” 只对 json 类型的模板生效。其中 <code>ByTag</code> 的合并规则类似于 v2ray 的多文件配置。<code>v1.9.5.7</code> 添加的 <code>ModifyOutbound</code> 合并方式比较特殊，请看 <a href=/V2RayGCon/01-usage/front-proxy/>前置代理</a>。模板中的 <code>%host%</code> 和 <code>%port%</code> 将会替换成 “默认值” 分页中的 “默认地址”。模板不一定是 json，也可以是 yaml 或者任意 text。不过目前对 yaml 的支持比较弱鸡，只会简单的替换第一层 key。而 text 类型的模板则直接插入到 config 的顶部。这样看文字比较抽象，建议自己添加几个不同类型的模板，然后看服务器最终配置的变化。注意模板的类型要和服务器 config 的类型对应，如果把一个 yaml 类型的模板应用到一个 json 类型的 config 会无效。</p><h5 id=最终配置>最终配置</h5><p>“Text编辑器” 里面看到的 config 是解码分享链接后生成的原始配置。在传给 core 前需要做点处理。比如，选项窗口中钩选了 uTLS，那么就要在 config 里面添加 fingerprint 配置项。还有流量统计、自签名证书以及 inbound 等设置也要转换成相应的配置合并进 config 里面。这样处理之后得到的就是 “最终配置”，即传给 core 的 config。</p><h5 id=多内核分页>多内核(分页)</h5><p><figure><img src=../../images/forms/form_option_custom_core.png></figure>这个软件默认支持 xray 和 v2ray v4.x 两种内核。其他内核可以自行在 “多内核” 分页里面添加。上面是一个 v2ray v5.x 的例子。这里配置完成后可以回 “默认值” 分页选择 “默认core”。使用自定义 core 时，流量统计功能失效。如果需要写盘 config 文件，注意文件名（v5.json）要和命令行参数一致。生成的配置文件（v5.json）位于软件目录内。</p><h6 id=环境变量>环境变量</h6><p>可以用逗号分隔多个变量，例如：<code>A=123, B=abc</code>。等号两边不要加空格。</p><h6 id=测速模板>测速模板</h6><p>测速的原理是启动一个入口为 HTTP 协议的代理服务器，然后测量通过这个代理去下载网页所用的时间。不同 core 的配置格式有所不同，所以不能直接套用 xray/v2ray 的 inbound 配置。用户可以给自定义 core 编写合适的 inbound 来支持测速功能。配置编写方式参考软件自带的 http 模板。测速时 <code>%host%</code> 将替换为 <code>127.0.0.1</code>, <code>%port%</code> 替换为随机端口。为了兼容旧版本，测速模板有个 “无” 选项。它其实是 xray/v2ray 的 HTTP inbound。<br><code>v1.8.8</code> 起支持通过 SOCKS5 协议测速，注意模板配置界面要钩上 SOCKS5 选项。这个选项仅在把该模板设置为自定义 core 的 “测速模板” 时有效。</p><h6 id=文件钩选项>“文件”（钩选项）</h6><p>钩上这个选项后每次启动内核前都会把最终配置写盘成文件。</p><p>通过写盘 config 文件的方式启动内核是有 bug 的。启动内核需要时间，如果这期间系统卡顿一下就有可能发生意外。比如连续启动 <code>#1</code>, <code>#2</code> 两个服务器，<code>#1</code> 服务器的config写盘然后启动但是系统卡顿了一下，<code>#2</code> 服务器接着写盘，这时 <code>#1</code> 服务器才启动同时 <code>#2</code> 服务器启动，于是 <code>#1</code> 和 <code>#2</code> 服务器都读取了 <code>#2</code> 服务器的 config 文件，结果通常是其中一个服务器因为端口冲突而启动失败。要是通过 <code>stdin:</code> 方式传入 config 就不会发生这样的问题。为了降低这个 bug 的发生概率，V2RayGCon 每次写盘后都要等待3秒钟，其实这个时间有时是不够的，所以只是降低概率并没有修复这个 bug。但是这个时间也不可以设置得太长。因为 3 秒就意味着一个小时最多进行 1200 次测速，如果每个服务器测 3 次那么就是只能测 400 个服务器。测速是并发进行的，不能写一次盘测 3 次。不知道哪个大聪明把 v2ray-core v5.x 的从 <code>stdin:</code> 读取配置功能改废了，每小时 1200 次写盘啊！！！</p><h5 id=导入以后修改设置>导入以后修改设置</h5><p>上面的设置仅对新导入的服务器生效，已经导入的服务器可以在服务器设置面板中修改相应的设置。<br><figure><img src=../../images/forms/form_settings_and_qrcode.png></figure>“*Inbound” 和 “*内核名” 对应选项窗口 “默认值” 分页中的 “默认模式” 和 “默认core”。<br>“*模板” 用于给服务器添加通用配置。假设我想给某几个服务器添加 routing 配置，那么先在选项窗口里面添加一个名为 routing 的模板。然后在上面的窗口中点 “*模板” 按钮，勾选 routing 模板就行。合并后的配置在 “最终配置” 里面查看。</p><p>提示：点击青色的 (http) 标签快速调出服务器设置窗口。</p><h5 id=同时修改多个服务器>同时修改多个服务器</h5><p><figure><img src=../../images/forms/form_batch_modify.png></figure>钩选多个服务器然后点击 “主窗口” - “服务器” - “批量修改”。</p><div class=edit-meta>Last updated on 1 Feb 2020<br>Published on 1 Feb 2020<br><a href=01-usage/import-share-links.md/edit/master/content/01-usage/import-share-links.md class=edit-page><i class="fas fa-pen-square"></i> Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://vrnobody.github.io/V2RayGCon/01-usage/search/ title=搜索功能><i class="fas fa-arrow-left" aria-hidden=true></i> Prev - 搜索功能</a>
<a class="nav nav-next" href=https://vrnobody.github.io/V2RayGCon/01-usage/front-proxy/ title=前置代理>Next - 前置代理 <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=open-menu><ul><li><a href=https://vrnobody.github.io/V2RayGCon>Home</a></li><li class=parent><a href=https://vrnobody.github.io/V2RayGCon/01-usage/>使用说明</a><ul class=sub-menu><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/tun-and-system-proxy/>TUN 和系统代理</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/options/>订阅及各设置项</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/search/>搜索功能</a></li><li class=active><a href=https://vrnobody.github.io/V2RayGCon/01-usage/import-share-links/>导入链接（重要）</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/front-proxy/>前置代理</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/multiple-inst-lnk/>多实例</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/autorun/>开机启动</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/share-links/>各种分享链接</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/01-usage/keyboard-shortcut/>快捷键</a></li></ul></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/>插件</a><ul class=sub-menu><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/01-luna/>Luna</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/>NeoLuna</a><ul class=sub-menu><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/basics/>开始使用</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/io-ctrols/>用户交互控件</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/sys-api/>Sys 库示例</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/web-ui/>Web UI</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/hy2-decoder/>导入 hy2://... 链接</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/hot-swap-outbounds/>热切换节点</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/04-neoluna/all-apis/>全部函数</a></li></ul></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/02-pacman/>Pacman</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/03-plugins/03-proxysetter/>ProxySetter</a></li></ul></li><li><a href=https://vrnobody.github.io/V2RayGCon/04-dev/>开发相关</a><ul class=sub-menu><li><a href=https://vrnobody.github.io/V2RayGCon/04-dev/01-release-log/>发布记录</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/04-dev/obsolete-features/>将删除的功能</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/04-dev/02-services-relationship/>各服务调用关系</a></li><li><a href=https://vrnobody.github.io/V2RayGCon/04-dev/03-concepts/>设计理念</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>
---
title: "多实例"
date: 2020-02-06T11:05:55+08:00
draft: false
weight: 60
---

`v1.8.9` 开始支持同时运行多个 V2RayGCon 图形界面实例。  

双击 V2RayGCon.exe 时，默认使用当前目录下的 userSettings.json 作为配置文件。可以通过命令行参数指定配置文件名，开启更多实例。假设软件安装在 `c:\vgc\V2RayGCon.exe`，那么在 cmd 执行以下命令：
```bash
c:
cd c:\vgc\
V2RayGCon.exe -s="us2.json" -t="233"
```
`-s="us2.json"` 表示使用当前目录下的 us2.json 作为配置文件。使用完整路径指定其他目录的配置文件也可以。  
`-t="233"` 表示给当前实例添加一个标记。托盘图标会显示标记的第一个字符，几个主要窗口的标题也会显示标记内容，方便区分当前操作的是哪个实例。  
`-h` 显示帮助信息。  
  
打命令很麻烦，所以更简单的办法是创建一个快捷方式，然后修改 “目标”。注意不要改 “起始位置”。  
{{< figure src="../../images/forms/mul_instance_lnk.png" >}}  


除了使用命令行参数启动多实例之外，还可以把整个 vgc 目录复制一份到其他位置然后运行。但是不建议这么做。主要因为这样复制后如果想添加或者更新 core，那么两边都要操作一次。或者修改 NeoLuna 的模块文件，又得改两次。  

##### 注意事项
 * 只在其中一个实例启用 ProxySetter 就好，否则多个实例同时修改系统设置会导致系统设置混乱
 * 特别注意！TUN 模式只可以开一个！
 * 多实例功能只支持 “便携模式”，如果其中一个实例不是运行在 “便携模式” 下，可能导致配置丢失
 * 不要玩路径穿越。比如一个实例用 `-s="us3.json"`，另一个实例用 `-s="../vgc/us3.json"`
 * 更新 V2RayGCon 前需要手动退出其他实例，只保留一个实例
 * 更新 core 前需要停止其他所有实例的服务器，否则会出现文件被占用无法写入
